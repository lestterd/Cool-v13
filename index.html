<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ðŸŽ° Lottery 1-100</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
    background:black;
    color:gold;
    text-align:center;
    font-family:Arial;
}

.grid{
    display:grid;
    grid-template-columns: repeat(10, 1fr);
    gap:5px;
    margin:20px;
}

.numero{
    padding:10px;
    background:#222;
    border:1px solid gold;
    cursor:pointer;
}

.numero.vendido{
    background:red;
    cursor:not-allowed;
}

button{
    padding:10px 20px;
    margin-top:10px;
    background:gold;
    border:none;
    cursor:pointer;
}

#winner{
    margin-top:20px;
    font-size:20px;
}
</style>
</head>

<body>

<h1>ðŸŽ° LOTTERY 1-100 ðŸŽ°</h1>
<h3>Precio por nÃºmero: $0.99</h3>

<input type="text" id="telegramId" placeholder="Tu ID de Telegram"><br>

<div class="grid" id="numeros"></div>

<button onclick="elegirGanador()">ðŸŽ¯ Elegir Ganador</button>

<div id="winner"></div>

<script>

let vendidos = {};
let ganadorElegido = false;

const grid = document.getElementById("numeros");

for(let i=1;i<=100;i++){
    let div = document.createElement("div");
    div.innerText = i;
    div.classList.add("numero");

    div.onclick = function(){
        let id = document.getElementById("telegramId").value;

        if(!id){
            alert("Debes poner tu ID de Telegram");
            return;
        }

        if(ganadorElegido){
            alert("El juego terminÃ³");
            return;
        }

        if(vendidos[i]){
            alert("NÃºmero ya vendido");
            return;
        }

        vendidos[i] = id;
        div.classList.add("vendido");
    }

    grid.appendChild(div);
}

function elegirGanador(){

    let claves = Object.keys(vendidos);

    if(claves.length == 0){
        alert("No hay nÃºmeros vendidos");
        return;
    }

    let random = claves[Math.floor(Math.random()*claves.length)];

    let idGanador = vendidos[random];

    document.getElementById("winner").innerHTML =
    "ðŸ† NÃºmero ganador: " + random + 
    "<br>Ganador ID: " + idGanador;

    ganadorElegido = true;
}

</script>

</body>
</html>
