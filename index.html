<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ğŸ° Lottery 1-100</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
    background:black;
    color:gold;
    text-align:center;
    font-family:Arial;
}

.grid{
    display:grid;
    grid-template-columns: repeat(10, 1fr);
    gap:6px;
    margin:20px;
}

.numero{
    padding:12px;
    background:#111;
    border:2px solid gold;
    cursor:pointer;
    font-weight:bold;
}

.numero.vendido{
    background:red;
    cursor:not-allowed;
}

#winner{
    margin-top:20px;
    font-size:24px;
}
</style>
</head>

<body>
<div style="text-align:center; margin-top:20px;">
<h1>ğŸ° LOTTERY 1-100 ğŸ°</h1>
<h3>Precio por nÃºmero: $0.99</h3>
</div>
    
<div class="grid" id="numeros"></div>

<div id="winner"></div>

<script>

let vendidos = {};
let totalVendidos = 0;
let animando = false;

const grid = document.getElementById("numeros");
const winnerDiv = document.getElementById("winner");

// ID automÃ¡tico desde Telegram
let user = Telegram.WebApp.initDataUnsafe.user;
let telegramId = user ? user.id : "Invitado";

for(let i=1;i<=100;i++){

    let div = document.createElement("div");
    div.innerText = i;
    div.classList.add("numero");

    div.onclick = function(){

        if(animando) return;

        if(vendidos[i]){
            alert("NÃºmero ya vendido");
            return;
        }

        vendidos[i] = telegramId;
        div.classList.add("vendido");

        totalVendidos++;

        if(totalVendidos === 100){
            iniciarSorteo();
        }
    }

    grid.appendChild(div);
}

function iniciarSorteo(){

    animando = true;
    let tiempo = 0;

    let intervalo = setInterval(function(){

        let numeroVisual = Math.floor(Math.random()*100)+1;
        winnerDiv.innerHTML = "ğŸ² Sorteando: " + numeroVisual;

        tiempo += 100;

        if(tiempo >= 10000){

            clearInterval(intervalo);

            let claves = Object.keys(vendidos);
            let random = claves[Math.floor(Math.random()*claves.length)];
let idGanador = vendidos[random];

winnerDiv.innerHTML =
"ğŸ† NÃšMERO GANADOR: " + random +
"<br>ğŸ‘¤ ID GANADOR: " + idGanador;

            animando = false;
        }

    },100);
}

</script>

</body>
</html>
